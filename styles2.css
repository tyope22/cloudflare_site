/* 1. Global Setup */
body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background-color: #f4f4f4;
}

/* 2. The 3D World (The Stage) */ 
#viewer-container { 
    perspective: 2000px; /* Use viewport width (vw) for a dynamic size based on the screen width */ /* Set the max width to make the card as wide as possible */ 
    width: 95vw; /* Set height relative to the width to maintain an ideal aspect ratio (e.g., 4:3) */ /* This formula ensures the book is wide but not overly tall */ 
    height: 71.25vw; /* 71.25% of 95vw gives a 4:3 aspect ratio (4 units wide, 3 units high) */ /* Set maximum limits for large screens */ 
    max-width: 1200px; 
    max-height: 900px; }

/* 3. The Folding Mechanism (The Card Itself) */
#folding-mechanism {
    /* Enables 3D transformations */
    transform-style: preserve-3d; 
    
    /* Position elements in the center */
    position: relative;
    width: 100%;
    height: 100%;
    
    /* Center the pivot point */
    transform-origin: 50% 50%; 
    
    /* Smooth animation for the fold */
    transition: transform 1s ease-in-out; 
}

/* 4. The Pages (Two visible sides) */
.page-side {
    position: absolute;
    width: 50%; /* Each page is half the container width */
    height: 100%;
    background-color: white;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
    
    /* Enable 3D transforms on the pages */
    transform-style: preserve-3d;
}

/* Position the Left Page (Inner Left) */
#left-side {
    left: 0;
    /* Rotation point is on the right edge (the spine) */
    transform-origin: right center; 
    /* Initially closed - hidden behind the right side */
    transform: rotateY(0deg); 
}

/* Pages need to be set up as a flipping 3D container */
.page-side {
    /* ... existing positioning/sizing code ... */
    transform-style: preserve-3d; /* CRITICAL: Enables 3D context for children */
    transition: transform 1s ease-in-out; /* Match this transition to your JS setTimeout */
}

/* The front and back faces of each page */
.page-face {
    position: absolute;
    width: 100%;
    height: 100%;
    
    /* CRITICAL: Hides the reverse side of the element during 3D rotation */
    backface-visibility: hidden; 
}

/* 1. The Front Face (Content initially visible) */
.page-face.front {
    transform: rotateY(0deg); 
}

/* 2. The Back Face (Content for the hidden side of the card) */
.page-face.back {
    /* Rotate the back face 180 degrees so it faces the correct direction when flipped */
    transform: rotateY(180deg);
}

/* Position the Right Page (Inner Right) */
#right-side {
    right: 0;
    /* Rotation point is on the left edge (the spine) */
    transform-origin: left center; 
    /* Stays fixed at 0 degrees */
    transform: rotateY(0deg); 
}

/* Class to trigger the main fold animation */
.folding #left-side {
    /* Flips the page to reveal the new page spread */
    transform: rotateY(-180deg);
}

/* 6. Mobile Responsiveness: Single-page view on narrow screens */
@media (max-width: 800px) {
    
    /* Make the container full width on mobile */
    #viewer-container {
        width: 98vw;
        height: 73.5vw; /* Maintain the 4:3 aspect ratio */
        perspective: 1000px; /* Reduce 3D depth for simpler mobile view */
    }
    
    /* Adjust the pages */
    .page-side {
        width: 100%; /* Left page takes full width */
        
        /* On mobile, we only show the left page and hide the right one */
        /* To simulate a single-page view */
        left: 0 !important;
        right: auto !important;
        transform-origin: center center !important; /* Stop the folding animation */
        
        /* Hide the right page entirely on small screens */
        opacity: 0;
        visibility: hidden;
    }
    
    #left-side {
        /* This page is always visible on mobile */
        opacity: 1;
        visibility: visible;
    }

    /* Disable all folding animation on mobile for stability */
    #folding-mechanism.folded {
        transform: none;
    }
}
